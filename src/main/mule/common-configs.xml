<?xml version="1.0" encoding="UTF-8"?>
<mule
	xmlns:coal-int-olg-reference-data-dapi="http://www.mulesoft.org/schema/mule/coal-int-olg-reference-data-dapi"
	xmlns:db="http://www.mulesoft.org/schema/mule/db"
	xmlns:wsc="http://www.mulesoft.org/schema/mule/wsc"
	xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns:tls="http://www.mulesoft.org/schema/mule/tls"
	xmlns:secure-properties="http://www.mulesoft.org/schema/mule/secure-properties"
	xmlns:apikit="http://www.mulesoft.org/schema/mule/mule-apikit"
	xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns:api-gateway="http://www.mulesoft.org/schema/mule/api-gateway"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/db http://www.mulesoft.org/schema/mule/db/current/mule-db.xsd http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/api-gateway http://www.mulesoft.org/schema/mule/api-gateway/current/mule-api-gateway.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/mule-apikit http://www.mulesoft.org/schema/mule/mule-apikit/current/mule-apikit.xsd
http://www.mulesoft.org/schema/mule/secure-properties http://www.mulesoft.org/schema/mule/secure-properties/current/mule-secure-properties.xsd
http://www.mulesoft.org/schema/mule/tls http://www.mulesoft.org/schema/mule/tls/current/mule-tls.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/wsc http://www.mulesoft.org/schema/mule/wsc/current/mule-wsc.xsd
http://www.mulesoft.org/schema/mule/coal-int-olg-reference-data-dapi http://www.mulesoft.org/schema/mule/coal-int-olg-reference-data-dapi/current/mule-coal-int-olg-reference-data-dapi.xsd">
	<configuration-properties
		doc:name="ConfigProperties"
		doc:id="09e0cac7-c94b-4e3f-8227-370efd77c7ca"
		file="configs\app-config.yaml" />
	<http:listener-config name="apiListenerConfig"
		doc:name="HTTP Listener config"
		doc:id="6109bd4e-5af7-495d-ab24-3a79abc83539" basePath="/">
		<http:listener-connection
			host="${secure::api.net.host}" port="${secure::api.net.port}" />
	</http:listener-config>
	<!-- <api-gateway:autodiscovery apiId="${secure::apimgr.id}" ignoreBasePath="true" 
		doc:name="API Autodiscovery" doc:id="a88e98a1-2f59-4450-b23e-0d0df15c7b17" 
		flowRef="api-main"/> -->
	<secure-properties:config
		name="AppPropertiesVault" doc:name="Secure Properties Config"
		doc:id="4fd45060-fc23-4aa8-9311-2af32d7f0554"
		file="configs/app-config-${muleEnv}.yaml" key="${propDecryptionKey}" />
	<wsc:config name="WSC_Config_amplaiqt_SecurityWebService"
		doc:name="Web Service Consumer Config"
		doc:id="ec57fc68-af6a-4b58-b2ab-3785306ec45a">
		<wsc:connection
			wsdlLocation="wsdl\bma\SecurityWebService.wsdl"
			service="SecurityWebService"
			port="BasicHttpBinding_ISecurityWebService"
			address="${secure::http.amplaiqt.SecurityWebService.net.addressBMA}">
			<wsc:web-service-security
				actor="http://schemas.xmlsoap.org/soap/actor/next" />
		</wsc:connection>
	</wsc:config>

	<http:request-config
		name="HTTP_Request_configuration"
		doc:name="HTTP Request configuration"
		doc:id="64b38dab-01f2-4ca9-93f2-90a570d6619b">
		<http:request-connection
			host="${secure::http.coal-int-olg-reference-data-dapi.net.host}"
			port="${secure::http.coal-int-olg-reference-data-dapi.net.port}"
			protocol="${secure::http.coal-int-olg-reference-data-dapi.net.protocol}" />
	</http:request-config>

	<coal-int-olg-reference-data-dapi:config
		name="CoalInt_OLG_ReferenceData_DAPI_Config"
		doc:name="CoalInt OLG ReferenceData DAPI Config"
		doc:id="6cd43463-ad4a-4787-a487-4f4428f69efc"
		property_host="${secure::http.coal-int-olg-reference-data-dapi.net.host}"
		property_port="${secure::http.coal-int-olg-reference-data-dapi.net.port}"
		property_protocol="${secure::http.coal-int-olg-reference-data-dapi.net.protocol}"
		property_basePath="${secure::http.coal-int-olg-reference-data-dapi.target.path}" />
	<sub-flow name="uf-generate-ids"
		doc:id="b0e518d3-f1eb-4809-ba55-b1626c37e578">
		<set-variable
			value="#[attributes.headers.'X-Message-ID' default uuid()]"
			doc:name="MESSAGE_ID" doc:id="625948a1-ee05-4155-b9a5-e6110e4ff552"
			variableName="MESSAGE_ID" />
		<set-variable
			value="#[attributes.headers.'X-Correlation-ID' default null]"
			doc:name="CORRELATION_ID"
			doc:id="4dea5e3b-9d79-482e-a559-788a68c04de6"
			variableName="CORRELATION_ID" />

	</sub-flow>
</mule>
