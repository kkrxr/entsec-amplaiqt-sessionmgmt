<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns:db="http://www.mulesoft.org/schema/mule/db"
	xmlns:coal-int-infm-reference-data-dapi="http://www.mulesoft.org/schema/mule/coal-int-infm-reference-data-dapi"
	xmlns:rxr-util-bhp="http://www.rubiconred.com/bhp/mule/extensions"
	xmlns:wsc="http://www.mulesoft.org/schema/mule/wsc"
	xmlns:ee="http://www.mulesoft.org/schema/mule/ee/core"
	xmlns:tls="http://www.mulesoft.org/schema/mule/tls"
	xmlns:http="http://www.mulesoft.org/schema/mule/http"
	xmlns="http://www.mulesoft.org/schema/mule/core"
	xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/tls http://www.mulesoft.org/schema/mule/tls/current/mule-tls.xsd
http://www.mulesoft.org/schema/mule/ee/core http://www.mulesoft.org/schema/mule/ee/core/current/mule-ee.xsd
http://www.mulesoft.org/schema/mule/wsc http://www.mulesoft.org/schema/mule/wsc/current/mule-wsc.xsd
http://www.rubiconred.com/bhp/mule/extensions http://www.rubiconred.com/bhp/mule/extensions/current/mule-rxr-util-bhp.xsd
http://www.mulesoft.org/schema/mule/coal-int-infm-reference-data-dapi http://www.mulesoft.org/schema/mule/coal-int-infm-reference-data-dapi/current/mule-coal-int-infm-reference-data-dapi.xsd
http://www.mulesoft.org/schema/mule/db http://www.mulesoft.org/schema/mule/db/current/mule-db.xsd">

	<sub-flow name="daf-ws-token"
		doc:id="bcdc7928-8036-44f1-b5df-00d4d4a786c1">
		<rxr-util-bhp:bhp-logger doc:name="BHP Logger"
			logMessage="GetNotificationConfig|REQUEST"
			businessKeys="#[vars.BUSINESS_KEYS]" />
		<ee:transform doc:name="Build Message"
			doc:id="2fc5db32-91d3-4b2d-8fd9-c7795b4be4e0">
			<ee:message>
				<ee:set-payload><![CDATA[%dw 2.0
output application/xml
ns ns0 http://www.citect.com/Ampla/Security/2007/06
---
{
	ns0#CreateSessionRequest: {
		ns0#Username: Mule::p('secure::ampla.username'),
		ns0#Password: Mule::p('secure::ampla.password'),
	}
}]]></ee:set-payload>
			</ee:message>
		</ee:transform>
		<wsc:consume operation="CreateSession" doc:name="Consume" doc:id="b51cf271-07d5-4cf6-982b-54943f79eb09" config-ref="WSC_Config_amplaiqt_SecurityWebService"/>
		<rxr-util-bhp:bhp-logger doc:name="BHP Logger"
			eventStage="Reply" logMessage="GetNotificationConfig|RESPONSE"
			businessKeys="#[vars.BUSINESS_KEYS]" />
	</sub-flow>
</mule>
